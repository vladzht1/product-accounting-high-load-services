# High-load Service

## Описание решение

Основные пункты задания:

- создать 1 сервис, который:
  - хранит данные `~1 000 000` пользователей
  - у всех пользователей с `has_problems = true` выставляет этот флаг в значение `false` и возвращает количество таких изменений
- фреймворк - `NestJS`
- СУБД - `PostgreSQL`

## Описание выбранного решения

### Стек

По требованию задания основной фреймворк - [NestJS](https://nestjs.com/). В качестве `ORM` использовался [TypeORM](https://typeorm.io/). Для удобного запуска был настроен [docker-compose](https://docs.docker.com/compose/).

### Запуск

**Для запуска на компьютере должен быть установлен [Docker](https://www.docker.com/).**

**Рекомендуется запускать под OS Linux.**

Чтобы полноценно проверить работу сервиса, необходимо поднять базу и скопировать туда заготовленный `backup` c данными `~1 000 000` пользователей:

```bash
# Установка зависимостей, создание файлов окружения
sh ./scripts/setup.sh

# Запуск базы данных без приложения
sh ./scripts/run_db.sh --detach

# Запуск миграции данных
sh ./scripts/restore_backup.sh ./backups/dump_latest.sql

# Остановка контейнера базы данных
docker stop users_postgres

# Запуск приложения и базы данных
sh ./scripts/run.sh # можно добавить флаг --detach, чтобы контейнеры работали в фоне
```
